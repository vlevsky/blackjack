<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blackjack Game</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #2d3436;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    .container {
      text-align: center;
      padding: 30px;
      background-color: #34495e;
      border-radius: 10px;
      width: 360px;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.2);
    }
    h1 {
      font-size: 2em;
      margin-bottom: 20px;
    }
    .balance, .bet, .hand {
      margin: 20px 0;
    }
    input {
      padding: 10px;
      font-size: 1em;
      margin-right: 10px;
      border-radius: 5px;
      border: none;
      width: 120px;
      text-align: center;
    }
    button {
      padding: 10px 20px;
      font-size: 1em;
      border-radius: 5px;
      background-color: #e74c3c;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background-color: #c0392b;
    }
    .card {
      display: inline-block;
      padding: 15px;
      margin: 5px;
      border-radius: 8px;
      font-size: 1.2em;
      background-color: #ecf0f1;
      color: #2c3e50;
      border: 2px solid #7f8c8d;
      width: 50px;
    }
    .card.heart, .card.diamond {
      background-color: #e74c3c;
      color: white;
    }
    .card.club, .card.spade {
      background-color: #2c3e50;
      color: white;
    }
    .card span {
      display: block;
      font-size: 1.4em;
    }
    .card.number {
      font-size: 1.2em;
      font-weight: bold;
    }
    .hand p {
      font-size: 1.2em;
      font-weight: bold;
    }
    #actions {
      margin-top: 20px;
      display: none;
    }
    #dealerTotal, #playerTotal {
      font-size: 1.5em;
    }
    #gameStatus {
      font-size: 1.3em;
      margin-top: 20px;
    }
    #gameResult {
      font-size: 1.5em;
      margin-top: 30px;
      font-weight: bold;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>Blackjack</h1>
  <div class="balance">
    <strong>Balance:</strong> $<span id="balance">1000</span>
  </div>

  <div class="bet">
    <input type="number" id="betAmount" placeholder="Enter your bet" min="1" />
    <button onclick="startGame()">Start Game</button>
  </div>

  <div id="gameStatus"></div>

  <div class="hand" id="playerHand">
    <h3>Your Hand</h3>
    <div id="playerCards"></div>
    <p>Total: <span id="playerTotal">0</span></p>
  </div>

  <div class="hand" id="dealerHand">
    <h3>Dealer's Hand</h3>
    <div id="dealerCards"></div>
    <p>Total: <span id="dealerTotal">0</span></p>
  </div>

  <div id="actions">
    <button onclick="playerAction('hit')">Hit</button>
    <button onclick="playerAction('stand')">Stand</button>
  </div>

  <div id="gameResult"></div>
</div>

<script>
  let balance = 1000;
  let bet = 0;
  let playerHand = [];
  let dealerHand = [];
  let deck = [];

  const cardValues = {
    '2': 2, '3': 3, '4': 4, '5': 5, '6': 6, '7': 7, '8': 8, '9': 9, '10': 10, 
    'J': 10, 'Q': 10, 'K': 10, 'A': 11
  };

  const cardSuits = ['heart', 'diamond', 'club', 'spade'];

  function startGame() {
    const betInput = document.getElementById('betAmount').value;
    if (betInput <= 0 || betInput > balance) {
      alert("Please enter a valid bet.");
      return;
    }

    bet = parseInt(betInput);
    balance -= bet;
    document.getElementById('balance').textContent = balance;
    resetGame();

    deck = createDeck();
    shuffleDeck(deck);

    // Deal two cards to player and dealer
    playerHand.push(deck.pop(), deck.pop());
    dealerHand.push(deck.pop(), deck.pop());

    displayHand('player', playerHand);
    displayHand('dealer', dealerHand);

    document.getElementById('actions').style.display = 'block';
    document.getElementById('gameStatus').textContent = 'Your turn!';
  }

  function createDeck() {
    let deck = [];
    for (let card in cardValues) {
      for (let suit of cardSuits) {
        deck.push({ card: card, suit: suit });
      }
    }
    return deck;
  }

  function shuffleDeck(deck) {
    for (let i = deck.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [deck[i], deck[j]] = [deck[j], deck[i]];
    }
  }

  function displayHand(player, hand, hideDealerCard = false) {
    let handElement = document.getElementById(player + 'Cards');
    handElement.innerHTML = '';
    hand.forEach(cardObj => {
      handElement.innerHTML += `<div class="card ${cardObj.suit}"><span>${cardObj.card}</span></div>`;
    });

    if (player === 'player') {
      document.getElementById('playerTotal').textContent = calculateTotal(hand);
    }

    if (player === 'dealer' && !hideDealerCard) {
      document.getElementById('dealerTotal').textContent = calculateTotal(hand);
    }
  }

  function calculateTotal(hand) {
    let total = hand.reduce((sum, cardObj) => sum + cardValues[cardObj.card], 0);
    hand.filter(cardObj => cardObj.card === 'A').forEach(() => {
      if (total > 21) total -= 10;
    });
    return total;
  }

  function playerAction(action) {
    if (action === 'hit') {
      playerHand.push(deck.pop());
      displayHand('player', playerHand);
      if (calculateTotal(playerHand) > 21) {
        endGame("You busted! You lose.");
        return;
      }
    } else if (action === 'stand') {
      dealerTurn();
    }
  }

  function dealerTurn() {
    while (calculateTotal(dealerHand) < 17) {
      dealerHand.push(deck.pop());
      displayHand('dealer', dealerHand);
    }

    const playerTotal = calculateTotal(playerHand);
    const dealerTotal = calculateTotal(dealerHand);

    if (dealerTotal > 21) {
      endGame("Dealer busted! You win!");
    } else if (playerTotal > dealerTotal) {
      endGame("You win!");
    } else if (playerTotal < dealerTotal) {
      endGame("Dealer wins.");
    } else {
      endGame("It's a tie!");
    }
  }

  function endGame(message) {
    document.getElementById('gameStatus').textContent = message;
    document.getElementById('actions').style.display = 'none';
    document.getElementById('gameResult').textContent = message;
    balance += (message.includes('win')) ? bet * 2 : 0;
    document.getElementById('balance').textContent = balance;
  }

  function resetGame() {
    playerHand = [];
    dealerHand = [];
    document.getElementById('gameResult').textContent = '';
    document.getElementById('playerCards').innerHTML = '';
    document.getElementById('dealerCards').innerHTML = '';
    document.getElementById('playerTotal').textContent = '0';
    document.getElementById('dealerTotal').textContent = '0';
  }
</script>

</body>
</html>
